
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>日置川旅遊行程表</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="6天5夜日置川旅遊互動行程表，含地圖、每日跳轉、即時天氣" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <style>
    body { font-family: "Segoe UI", sans-serif; padding: 1em; background: #f8f9fa; }
    table { width: 100%; }
    th { background: #e3f2fd; }
    #weather-box { background: #fff3cd; color: #856404; padding: 10px; border-radius: 6px; margin-bottom: 1em; }
    @media (max-width: 768px) {
      table.dataTable td { font-size: 12px; }
    }
  </style>
</head>
<body>
  <div style="text-align:center; margin-bottom:10px;">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://blue9111.github.io/hiogawa-trip/" alt="掃碼開啟">
    <div style="font-size:12px; color:#666;">📱 掃碼快速開啟行程頁面</div>
  </div>

  <div id="weather-box">⏳ 正在取得天氣資料...</div>

  <table id="itinerary" class="display">
    <thead><tr><th>📅 日期</th><th>行程內容</th><th>地點</th><th>時間</th><th>備註</th><th>地址</th><th>地圖連結</th></tr></thead>
    <tbody>
      <tr id="date_0911"><td>📅 9/11 (四)</td><td>元嶋神社</td><td>天神崎</td><td>13:30~15:00</td><td></td><td>和歌山県田辺市</td><td><a href="https://goo.gl/maps/x" target="_blank">📍</a></td></tr>
      <tr id="date_0912"><td>📅 9/12 (五)</td><td>日置川鮎釣</td><td>日置川</td><td>09:00~16:00</td><td></td><td>和歌山県西牟婁郡</td><td><a href="https://goo.gl/maps/y" target="_blank">📍</a></td></tr>
    </tbody>
  </table>

  <script>
    $(document).ready(function () {
      $('#itinerary').DataTable({
        "pageLength": 10,
        "language": {
          "search": "🔍 搜尋：",
          "lengthMenu": "每頁顯示 _MENU_ 筆（包含該天所有行程）",
          "info": "顯示第 _START_ 到 _END_ 筆，共 _TOTAL_ 筆",
          "paginate": { "previous": "⬅️", "next": "➡️" }
        }
      });

      fetch("https://api.open-meteo.com/v1/forecast?latitude=33.723&longitude=135.379&current=temperature_2m,precipitation,weathercode&timezone=Asia%2FTokyo")
        .then(res => res.json())
        .then(data => {
          const t = data.current.temperature_2m;
          const r = data.current.precipitation;
          const w = data.current.weathercode;
          const map = {0:"☀️ 晴",1:"🌤️ 晴時多雲",2:"⛅",3:"☁️",45:"🌫️",51:"🌦️",61:"🌧️",95:"⛈️"};
          document.getElementById("weather-box").innerHTML = `📍 現在田邊市：<strong>${map[w]||'☁️'}</strong> ${t}°C，降雨量 ${r} mm/h`;
        })
        .catch(() => { document.getElementById("weather-box").innerText = "⚠️ 無法取得即時天氣資料"; });
    });
  </script>
</body>
</html>
